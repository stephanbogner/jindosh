!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).jindosh={})}(this,(function(t){"use strict";function e(t,e,n={}){const i=n.force_key??"f",s=n.weight_key??"w",r=n.default_force??1,o=n.default_weight??1,h=n.force_scale??1,l=n.maximum_distance_of_force??!1,a=t.x-e.x,c=t.y-e.y,f=Math.sqrt(Math.pow(a,2)+Math.pow(c,2));if(l&&f>=l)return{point_1:t,point_2:e};{const n=t[s]??o,l=e[s]??o,_=n+l,u=1e-5,d=Math.max(f,u),g=Math.atan2(a,c),y=((t[i]??r)+(e[i]??r))/2,w=5e4,p=1/Math.pow(d,2)*y*w*h,x=l/_*p,m=n/_*p;return[{dx:Math.sin(g)*x,dy:Math.cos(g)*x},{dx:-Math.sin(g)*m,dy:-Math.cos(g)*m}]}}function n(t){const e=t.length;let n=[];for(let t=0;t<e;t++)for(let i=t+1;i<e;i++){const e=[t,i];n.push(e)}return n}const i=134217729;function s(t,e,n,i,s){let r,o,h,l,a=e[0],c=i[0],f=0,_=0;c>a==c>-a?(r=a,a=e[++f]):(r=c,c=i[++_]);let u=0;if(f<t&&_<n)for(c>a==c>-a?(o=a+r,h=r-(o-a),a=e[++f]):(o=c+r,h=r-(o-c),c=i[++_]),r=o,0!==h&&(s[u++]=h);f<t&&_<n;)c>a==c>-a?(o=r+a,l=o-r,h=r-(o-l)+(a-l),a=e[++f]):(o=r+c,l=o-r,h=r-(o-l)+(c-l),c=i[++_]),r=o,0!==h&&(s[u++]=h);for(;f<t;)o=r+a,l=o-r,h=r-(o-l)+(a-l),a=e[++f],r=o,0!==h&&(s[u++]=h);for(;_<n;)o=r+c,l=o-r,h=r-(o-l)+(c-l),c=i[++_],r=o,0!==h&&(s[u++]=h);return 0===r&&0!==u||(s[u++]=r),u}function r(t){return new Float64Array(t)}const o=r(4),h=r(8),l=r(12),a=r(16),c=r(4);function f(t,e,n,r,f,_){const u=(e-_)*(n-f),d=(t-f)*(r-_),g=u-d;if(0===u||0===d||u>0!=d>0)return g;const y=Math.abs(u+d);return Math.abs(g)>=33306690738754716e-32*y?g:-function(t,e,n,r,f,_,u){let d,g,y,w,p,x,m,b,M,v,k,S,A,z,T,U,K,L;const j=t-f,N=n-f,P=e-_,q=r-_;z=j*q,x=i*j,m=x-(x-j),b=j-m,x=i*q,M=x-(x-q),v=q-M,T=b*v-(z-m*M-b*M-m*v),U=P*N,x=i*P,m=x-(x-P),b=P-m,x=i*N,M=x-(x-N),v=N-M,K=b*v-(U-m*M-b*M-m*v),k=T-K,p=T-k,o[0]=T-(k+p)+(p-K),S=z+k,p=S-z,A=z-(S-p)+(k-p),k=A-U,p=A-k,o[1]=A-(k+p)+(p-U),L=S+k,p=L-S,o[2]=S-(L-p)+(k-p),o[3]=L;let F=function(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}(4,o),I=22204460492503146e-32*u;if(F>=I||-F>=I)return F;if(p=t-j,d=t-(j+p)+(p-f),p=n-N,y=n-(N+p)+(p-f),p=e-P,g=e-(P+p)+(p-_),p=r-q,w=r-(q+p)+(p-_),0===d&&0===g&&0===y&&0===w)return F;if(I=11093356479670487e-47*u+33306690738754706e-32*Math.abs(F),F+=j*w+q*d-(P*y+N*g),F>=I||-F>=I)return F;z=d*q,x=i*d,m=x-(x-d),b=d-m,x=i*q,M=x-(x-q),v=q-M,T=b*v-(z-m*M-b*M-m*v),U=g*N,x=i*g,m=x-(x-g),b=g-m,x=i*N,M=x-(x-N),v=N-M,K=b*v-(U-m*M-b*M-m*v),k=T-K,p=T-k,c[0]=T-(k+p)+(p-K),S=z+k,p=S-z,A=z-(S-p)+(k-p),k=A-U,p=A-k,c[1]=A-(k+p)+(p-U),L=S+k,p=L-S,c[2]=S-(L-p)+(k-p),c[3]=L;const O=s(4,o,4,c,h);z=j*w,x=i*j,m=x-(x-j),b=j-m,x=i*w,M=x-(x-w),v=w-M,T=b*v-(z-m*M-b*M-m*v),U=P*y,x=i*P,m=x-(x-P),b=P-m,x=i*y,M=x-(x-y),v=y-M,K=b*v-(U-m*M-b*M-m*v),k=T-K,p=T-k,c[0]=T-(k+p)+(p-K),S=z+k,p=S-z,A=z-(S-p)+(k-p),k=A-U,p=A-k,c[1]=A-(k+p)+(p-U),L=S+k,p=L-S,c[2]=S-(L-p)+(k-p),c[3]=L;const E=s(O,h,4,c,l);z=d*w,x=i*d,m=x-(x-d),b=d-m,x=i*w,M=x-(x-w),v=w-M,T=b*v-(z-m*M-b*M-m*v),U=g*y,x=i*g,m=x-(x-g),b=g-m,x=i*y,M=x-(x-y),v=y-M,K=b*v-(U-m*M-b*M-m*v),k=T-K,p=T-k,c[0]=T-(k+p)+(p-K),S=z+k,p=S-z,A=z-(S-p)+(k-p),k=A-U,p=A-k,c[1]=A-(k+p)+(p-U),L=S+k,p=L-S,c[2]=S-(L-p)+(k-p),c[3]=L;const H=s(E,l,4,c,a);return a[H-1]}(t,e,n,r,f,_,y)}const _=Math.pow(2,-52),u=new Uint32Array(512);class d{static from(t,e=m,n=b){const i=t.length,s=new Float64Array(2*i);for(let r=0;r<i;r++){const i=t[r];s[2*r]=e(i),s[2*r+1]=n(i)}return new d(s)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:i,_hullHash:s}=this,r=t.length>>1;let o=1/0,h=1/0,l=-1/0,a=-1/0;for(let e=0;e<r;e++){const n=t[2*e],i=t[2*e+1];n<o&&(o=n),i<h&&(h=i),n>l&&(l=n),i>a&&(a=i),this._ids[e]=e}const c=(o+l)/2,u=(h+a)/2;let d,y,x,m=1/0;for(let e=0;e<r;e++){const n=g(c,u,t[2*e],t[2*e+1]);n<m&&(d=e,m=n)}const b=t[2*d],M=t[2*d+1];m=1/0;for(let e=0;e<r;e++){if(e===d)continue;const n=g(b,M,t[2*e],t[2*e+1]);n<m&&n>0&&(y=e,m=n)}let v=t[2*y],k=t[2*y+1],S=1/0;for(let e=0;e<r;e++){if(e===d||e===y)continue;const n=w(b,M,v,k,t[2*e],t[2*e+1]);n<S&&(x=e,S=n)}let A=t[2*x],z=t[2*x+1];if(S===1/0){for(let e=0;e<r;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];p(this._ids,this._dists,0,r-1);const e=new Uint32Array(r);let n=0;for(let t=0,i=-1/0;t<r;t++){const s=this._ids[t];this._dists[s]>i&&(e[n++]=s,i=this._dists[s])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(f(b,M,v,k,A,z)<0){const t=y,e=v,n=k;y=x,v=A,k=z,x=t,A=e,z=n}const T=function(t,e,n,i,s,r){const o=n-t,h=i-e,l=s-t,a=r-e,c=o*o+h*h,f=l*l+a*a,_=.5/(o*a-h*l);return{x:t+(a*c-h*f)*_,y:e+(o*f-l*c)*_}}(b,M,v,k,A,z);this._cx=T.x,this._cy=T.y;for(let e=0;e<r;e++)this._dists[e]=g(t[2*e],t[2*e+1],T.x,T.y);p(this._ids,this._dists,0,r-1),this._hullStart=d;let U=3;n[d]=e[x]=y,n[y]=e[d]=x,n[x]=e[y]=d,i[d]=0,i[y]=1,i[x]=2,s.fill(-1),s[this._hashKey(b,M)]=d,s[this._hashKey(v,k)]=y,s[this._hashKey(A,z)]=x,this.trianglesLen=0,this._addTriangle(d,y,x,-1,-1,-1);for(let r,o,h=0;h<this._ids.length;h++){const l=this._ids[h],a=t[2*l],c=t[2*l+1];if(h>0&&Math.abs(a-r)<=_&&Math.abs(c-o)<=_)continue;if(r=a,o=c,l===d||l===y||l===x)continue;let u=0;for(let t=0,e=this._hashKey(a,c);t<this._hashSize&&(u=s[(e+t)%this._hashSize],-1===u||u===n[u]);t++);u=e[u];let g,w=u;for(;g=n[w],f(a,c,t[2*w],t[2*w+1],t[2*g],t[2*g+1])>=0;)if(w=g,w===u){w=-1;break}if(-1===w)continue;let p=this._addTriangle(w,l,n[w],-1,-1,i[w]);i[l]=this._legalize(p+2),i[w]=p,U++;let m=n[w];for(;g=n[m],f(a,c,t[2*m],t[2*m+1],t[2*g],t[2*g+1])<0;)p=this._addTriangle(m,l,g,i[l],-1,i[m]),i[l]=this._legalize(p+2),n[m]=m,U--,m=g;if(w===u)for(;g=e[w],f(a,c,t[2*g],t[2*g+1],t[2*w],t[2*w+1])<0;)p=this._addTriangle(g,l,w,-1,i[w],i[g]),this._legalize(p+2),i[g]=p,n[w]=w,U--,w=g;this._hullStart=e[l]=w,n[w]=e[m]=l,n[l]=m,s[this._hashKey(a,c)]=l,s[this._hashKey(t[2*w],t[2*w+1])]=w}this.hull=new Uint32Array(U);for(let t=0,e=this._hullStart;t<U;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:i}=this;let s=0,r=0;for(;;){const o=n[t],h=t-t%3;if(r=h+(t+2)%3,-1===o){if(0===s)break;t=u[--s];continue}const l=o-o%3,a=h+(t+1)%3,c=l+(o+2)%3,f=e[r],_=e[t],d=e[a],g=e[c];if(y(i[2*f],i[2*f+1],i[2*_],i[2*_+1],i[2*d],i[2*d+1],i[2*g],i[2*g+1])){e[t]=g,e[o]=f;const i=n[c];if(-1===i){let e=this._hullStart;do{if(this._hullTri[e]===c){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,i),this._link(o,n[r]),this._link(r,c);const h=l+(o+1)%3;s<u.length&&(u[s++]=h)}else{if(0===s)break;t=u[--s]}}return r}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,i,s,r){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,i),this._link(o+1,s),this._link(o+2,r),this.trianglesLen+=3,o}}function g(t,e,n,i){const s=t-n,r=e-i;return s*s+r*r}function y(t,e,n,i,s,r,o,h){const l=t-o,a=e-h,c=n-o,f=i-h,_=s-o,u=r-h,d=c*c+f*f,g=_*_+u*u;return l*(f*g-d*u)-a*(c*g-d*_)+(l*l+a*a)*(c*u-f*_)<0}function w(t,e,n,i,s,r){const o=n-t,h=i-e,l=s-t,a=r-e,c=o*o+h*h,f=l*l+a*a,_=.5/(o*a-h*l),u=(a*c-h*f)*_,d=(o*f-l*c)*_;return u*u+d*d}function p(t,e,n,i){if(i-n<=20)for(let s=n+1;s<=i;s++){const i=t[s],r=e[i];let o=s-1;for(;o>=n&&e[t[o]]>r;)t[o+1]=t[o--];t[o+1]=i}else{let s=n+1,r=i;x(t,n+i>>1,s),e[t[n]]>e[t[i]]&&x(t,n,i),e[t[s]]>e[t[i]]&&x(t,s,i),e[t[n]]>e[t[s]]&&x(t,n,s);const o=t[s],h=e[o];for(;;){do{s++}while(e[t[s]]<h);do{r--}while(e[t[r]]>h);if(r<s)break;x(t,s,r)}t[n+1]=t[r],t[r]=o,i-s+1>=r-n?(p(t,e,s,i),p(t,e,n,r-1)):(p(t,e,n,r-1),p(t,e,s,i))}}function x(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function m(t){return t[0]}function b(t){return t[1]}t.delaunay_triangulation=function(t){const e=function(t){let e=[];return t.map((t=>{e.push(t.x),e.push(t.y)})),e}(t),n=new d(e).triangles;let i=[];for(let t=0;t<n.length;t+=3)i.push([n[t],n[t+1],n[t+2]]);return i},t.get_hexagon_shaped_point_grid=function(t=5,e=200,n={}){const i=n.minimal_output??!1;let s=[];const r=t+1;for(let n=0;n<r;n++)for(let o=0;o<r;o++)for(let h=0;h<r;h++)if(0===n||0===o||0===h){const l=o-n,a=n+o-2*h,c=n===r-1||o===r-1||h===r-1,f=l/t*e*.5,_=a/t*e*.5*.57735,u=l+"/"+a;let d;d=i?{x:f,y:_}:{x:f,y:_,relative_x:l,relative_y:a,id:u,is_outer_point:c},s.push(d)}return s},t.get_inline_svg_for_downloading=function(t){var e=(new XMLSerializer).serializeToString(t);return e.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(e=e.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),e.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)||(e=e.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),e='<?xml version="1.0" standalone="no"?>\r\n'+e,"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e)},t.magnetic_force_between_points=function(t,i={}){let s=JSON.parse(JSON.stringify(t));const r=n(s);let o=[];return r.map((t=>{const n=t[0],i=t[1],r=e(s[n],s[i]);o[n]||(o[n]={x:0,y:0}),o[n].x+=r[0].dx,o[n].y+=r[0].dy,o[i]||(o[i]={x:0,y:0}),o[i].x+=r[1].dx,o[i].y+=r[1].dy})),s.map(((t,e)=>{o[e]&&(t.x+=o[e].x/r.length,t.y+=o[e].y/r.length)})),s},t.magnetic_force_between_two_points=e,t.merge_class_names=function(...t){return t.filter(Boolean).join(" ")},t.rgb_to_hex=function(t){return"#"+((1<<24)+(t.r<<16)+(t.g<<8)+t.b).toString(16).slice(1)},t.unique_pairs_from_array_as_indexes=n,Object.defineProperty(t,"__esModule",{value:!0})}));

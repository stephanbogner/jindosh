!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).jindosh={})}(this,(function(t){"use strict";function e(t,e,i={}){const n=i.force_key??"f",s=i.weight_key??"w",r=i.default_force??1,h=i.default_weight??1,o=i.force_scale??1,l=i.maximum_distance_of_force??!1,a=t.x-e.x,f=t.y-e.y,c=Math.sqrt(Math.pow(a,2)+Math.pow(f,2));if(l&&c>=l)return{point_1:t,point_2:e};{const i=t[s]??h,l=e[s]??h,_=i+l,u=1e-5,d=Math.max(c,u),y=Math.atan2(a,f),g=((t[n]??r)+(e[n]??r))/2,p=5e4,x=1/Math.pow(d,2)*g*p*o,w=l/_*x,b=i/_*x;return[{dx:Math.sin(y)*w,dy:Math.cos(y)*w},{dx:-Math.sin(y)*b,dy:-Math.cos(y)*b}]}}function i(t){const e=t.length;let i=[];for(let t=0;t<e;t++)for(let n=t+1;n<e;n++){const e=[t,n];i.push(e)}return i}const n=134217729;function s(t,e,i,n,s){let r,h,o,l,a=e[0],f=n[0],c=0,_=0;f>a==f>-a?(r=a,a=e[++c]):(r=f,f=n[++_]);let u=0;if(c<t&&_<i)for(f>a==f>-a?(h=a+r,o=r-(h-a),a=e[++c]):(h=f+r,o=r-(h-f),f=n[++_]),r=h,0!==o&&(s[u++]=o);c<t&&_<i;)f>a==f>-a?(h=r+a,l=h-r,o=r-(h-l)+(a-l),a=e[++c]):(h=r+f,l=h-r,o=r-(h-l)+(f-l),f=n[++_]),r=h,0!==o&&(s[u++]=o);for(;c<t;)h=r+a,l=h-r,o=r-(h-l)+(a-l),a=e[++c],r=h,0!==o&&(s[u++]=o);for(;_<i;)h=r+f,l=h-r,o=r-(h-l)+(f-l),f=n[++_],r=h,0!==o&&(s[u++]=o);return 0===r&&0!==u||(s[u++]=r),u}function r(t){return new Float64Array(t)}const h=r(4),o=r(8),l=r(12),a=r(16),f=r(4);function c(t,e,i,r,c,_){const u=(e-_)*(i-c),d=(t-c)*(r-_),y=u-d;if(0===u||0===d||u>0!=d>0)return y;const g=Math.abs(u+d);return Math.abs(y)>=33306690738754716e-32*g?y:-function(t,e,i,r,c,_,u){let d,y,g,p,x,w,b,M,m,A,k,S,T,z,U,v,K,L;const j=t-c,N=i-c,P=e-_,q=r-_;z=j*q,w=n*j,b=w-(w-j),M=j-b,w=n*q,m=w-(w-q),A=q-m,U=M*A-(z-b*m-M*m-b*A),v=P*N,w=n*P,b=w-(w-P),M=P-b,w=n*N,m=w-(w-N),A=N-m,K=M*A-(v-b*m-M*m-b*A),k=U-K,x=U-k,h[0]=U-(k+x)+(x-K),S=z+k,x=S-z,T=z-(S-x)+(k-x),k=T-v,x=T-k,h[1]=T-(k+x)+(x-v),L=S+k,x=L-S,h[2]=S-(L-x)+(k-x),h[3]=L;let F=function(t,e){let i=e[0];for(let n=1;n<t;n++)i+=e[n];return i}(4,h),O=22204460492503146e-32*u;if(F>=O||-F>=O)return F;if(x=t-j,d=t-(j+x)+(x-c),x=i-N,g=i-(N+x)+(x-c),x=e-P,y=e-(P+x)+(x-_),x=r-q,p=r-(q+x)+(x-_),0===d&&0===y&&0===g&&0===p)return F;if(O=11093356479670487e-47*u+33306690738754706e-32*Math.abs(F),F+=j*p+q*d-(P*g+N*y),F>=O||-F>=O)return F;z=d*q,w=n*d,b=w-(w-d),M=d-b,w=n*q,m=w-(w-q),A=q-m,U=M*A-(z-b*m-M*m-b*A),v=y*N,w=n*y,b=w-(w-y),M=y-b,w=n*N,m=w-(w-N),A=N-m,K=M*A-(v-b*m-M*m-b*A),k=U-K,x=U-k,f[0]=U-(k+x)+(x-K),S=z+k,x=S-z,T=z-(S-x)+(k-x),k=T-v,x=T-k,f[1]=T-(k+x)+(x-v),L=S+k,x=L-S,f[2]=S-(L-x)+(k-x),f[3]=L;const E=s(4,h,4,f,o);z=j*p,w=n*j,b=w-(w-j),M=j-b,w=n*p,m=w-(w-p),A=p-m,U=M*A-(z-b*m-M*m-b*A),v=P*g,w=n*P,b=w-(w-P),M=P-b,w=n*g,m=w-(w-g),A=g-m,K=M*A-(v-b*m-M*m-b*A),k=U-K,x=U-k,f[0]=U-(k+x)+(x-K),S=z+k,x=S-z,T=z-(S-x)+(k-x),k=T-v,x=T-k,f[1]=T-(k+x)+(x-v),L=S+k,x=L-S,f[2]=S-(L-x)+(k-x),f[3]=L;const H=s(E,o,4,f,l);z=d*p,w=n*d,b=w-(w-d),M=d-b,w=n*p,m=w-(w-p),A=p-m,U=M*A-(z-b*m-M*m-b*A),v=y*g,w=n*y,b=w-(w-y),M=y-b,w=n*g,m=w-(w-g),A=g-m,K=M*A-(v-b*m-M*m-b*A),k=U-K,x=U-k,f[0]=U-(k+x)+(x-K),S=z+k,x=S-z,T=z-(S-x)+(k-x),k=T-v,x=T-k,f[1]=T-(k+x)+(x-v),L=S+k,x=L-S,f[2]=S-(L-x)+(k-x),f[3]=L;const I=s(H,l,4,f,a);return a[I-1]}(t,e,i,r,c,_,g)}const _=Math.pow(2,-52),u=new Uint32Array(512);class d{static from(t,e=b,i=M){const n=t.length,s=new Float64Array(2*n);for(let r=0;r<n;r++){const n=t[r];s[2*r]=e(n),s[2*r+1]=i(n)}return new d(s)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:i,_hullTri:n,_hullHash:s}=this,r=t.length>>1;let h=1/0,o=1/0,l=-1/0,a=-1/0;for(let e=0;e<r;e++){const i=t[2*e],n=t[2*e+1];i<h&&(h=i),n<o&&(o=n),i>l&&(l=i),n>a&&(a=n),this._ids[e]=e}const f=(h+l)/2,u=(o+a)/2;let d,g,w,b=1/0;for(let e=0;e<r;e++){const i=y(f,u,t[2*e],t[2*e+1]);i<b&&(d=e,b=i)}const M=t[2*d],m=t[2*d+1];b=1/0;for(let e=0;e<r;e++){if(e===d)continue;const i=y(M,m,t[2*e],t[2*e+1]);i<b&&i>0&&(g=e,b=i)}let A=t[2*g],k=t[2*g+1],S=1/0;for(let e=0;e<r;e++){if(e===d||e===g)continue;const i=p(M,m,A,k,t[2*e],t[2*e+1]);i<S&&(w=e,S=i)}let T=t[2*w],z=t[2*w+1];if(S===1/0){for(let e=0;e<r;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];x(this._ids,this._dists,0,r-1);const e=new Uint32Array(r);let i=0;for(let t=0,n=-1/0;t<r;t++){const s=this._ids[t];this._dists[s]>n&&(e[i++]=s,n=this._dists[s])}return this.hull=e.subarray(0,i),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(c(M,m,A,k,T,z)<0){const t=g,e=A,i=k;g=w,A=T,k=z,w=t,T=e,z=i}const U=function(t,e,i,n,s,r){const h=i-t,o=n-e,l=s-t,a=r-e,f=h*h+o*o,c=l*l+a*a,_=.5/(h*a-o*l);return{x:t+(a*f-o*c)*_,y:e+(h*c-l*f)*_}}(M,m,A,k,T,z);this._cx=U.x,this._cy=U.y;for(let e=0;e<r;e++)this._dists[e]=y(t[2*e],t[2*e+1],U.x,U.y);x(this._ids,this._dists,0,r-1),this._hullStart=d;let v=3;i[d]=e[w]=g,i[g]=e[d]=w,i[w]=e[g]=d,n[d]=0,n[g]=1,n[w]=2,s.fill(-1),s[this._hashKey(M,m)]=d,s[this._hashKey(A,k)]=g,s[this._hashKey(T,z)]=w,this.trianglesLen=0,this._addTriangle(d,g,w,-1,-1,-1);for(let r,h,o=0;o<this._ids.length;o++){const l=this._ids[o],a=t[2*l],f=t[2*l+1];if(o>0&&Math.abs(a-r)<=_&&Math.abs(f-h)<=_)continue;if(r=a,h=f,l===d||l===g||l===w)continue;let u=0;for(let t=0,e=this._hashKey(a,f);t<this._hashSize&&(u=s[(e+t)%this._hashSize],-1===u||u===i[u]);t++);u=e[u];let y,p=u;for(;y=i[p],c(a,f,t[2*p],t[2*p+1],t[2*y],t[2*y+1])>=0;)if(p=y,p===u){p=-1;break}if(-1===p)continue;let x=this._addTriangle(p,l,i[p],-1,-1,n[p]);n[l]=this._legalize(x+2),n[p]=x,v++;let b=i[p];for(;y=i[b],c(a,f,t[2*b],t[2*b+1],t[2*y],t[2*y+1])<0;)x=this._addTriangle(b,l,y,n[l],-1,n[b]),n[l]=this._legalize(x+2),i[b]=b,v--,b=y;if(p===u)for(;y=e[p],c(a,f,t[2*y],t[2*y+1],t[2*p],t[2*p+1])<0;)x=this._addTriangle(y,l,p,-1,n[p],n[y]),this._legalize(x+2),n[y]=x,i[p]=p,v--,p=y;this._hullStart=e[l]=p,i[p]=e[b]=l,i[l]=b,s[this._hashKey(a,f)]=l,s[this._hashKey(t[2*p],t[2*p+1])]=p}this.hull=new Uint32Array(v);for(let t=0,e=this._hullStart;t<v;t++)this.hull[t]=e,e=i[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:i,coords:n}=this;let s=0,r=0;for(;;){const h=i[t],o=t-t%3;if(r=o+(t+2)%3,-1===h){if(0===s)break;t=u[--s];continue}const l=h-h%3,a=o+(t+1)%3,f=l+(h+2)%3,c=e[r],_=e[t],d=e[a],y=e[f];if(g(n[2*c],n[2*c+1],n[2*_],n[2*_+1],n[2*d],n[2*d+1],n[2*y],n[2*y+1])){e[t]=y,e[h]=c;const n=i[f];if(-1===n){let e=this._hullStart;do{if(this._hullTri[e]===f){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,n),this._link(h,i[r]),this._link(r,f);const o=l+(h+1)%3;s<u.length&&(u[s++]=o)}else{if(0===s)break;t=u[--s]}}return r}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,i,n,s,r){const h=this.trianglesLen;return this._triangles[h]=t,this._triangles[h+1]=e,this._triangles[h+2]=i,this._link(h,n),this._link(h+1,s),this._link(h+2,r),this.trianglesLen+=3,h}}function y(t,e,i,n){const s=t-i,r=e-n;return s*s+r*r}function g(t,e,i,n,s,r,h,o){const l=t-h,a=e-o,f=i-h,c=n-o,_=s-h,u=r-o,d=f*f+c*c,y=_*_+u*u;return l*(c*y-d*u)-a*(f*y-d*_)+(l*l+a*a)*(f*u-c*_)<0}function p(t,e,i,n,s,r){const h=i-t,o=n-e,l=s-t,a=r-e,f=h*h+o*o,c=l*l+a*a,_=.5/(h*a-o*l),u=(a*f-o*c)*_,d=(h*c-l*f)*_;return u*u+d*d}function x(t,e,i,n){if(n-i<=20)for(let s=i+1;s<=n;s++){const n=t[s],r=e[n];let h=s-1;for(;h>=i&&e[t[h]]>r;)t[h+1]=t[h--];t[h+1]=n}else{let s=i+1,r=n;w(t,i+n>>1,s),e[t[i]]>e[t[n]]&&w(t,i,n),e[t[s]]>e[t[n]]&&w(t,s,n),e[t[i]]>e[t[s]]&&w(t,i,s);const h=t[s],o=e[h];for(;;){do{s++}while(e[t[s]]<o);do{r--}while(e[t[r]]>o);if(r<s)break;w(t,s,r)}t[i+1]=t[r],t[r]=h,n-s+1>=r-i?(x(t,e,s,n),x(t,e,i,r-1)):(x(t,e,i,r-1),x(t,e,s,n))}}function w(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function b(t){return t[0]}function M(t){return t[1]}t.delaunay_triangulation=function(t){const e=function(t){let e=[];return t.map((t=>{e.push(t.x),e.push(t.y)})),e}(t),i=new d(e).triangles;let n=[];for(let t=0;t<i.length;t+=3)n.push([i[t],i[t+1],i[t+2]]);return n},t.get_hexagon_shaped_point_grid=function(t=5,e=200,i={}){const n=i.minimal_output??!1;let s=[];const r=t+1;for(let i=0;i<r;i++)for(let h=0;h<r;h++)for(let o=0;o<r;o++)if(0===i||0===h||0===o){const l=h-i,a=i+h-2*o,f=i===r-1||h===r-1||o===r-1,c=l/t*e*.5,_=a/t*e*.5*.57735,u=l+"/"+a;let d;d=n?{x:c,y:_}:{x:c,y:_,relative_x:l,relative_y:a,id:u,is_outer_point:f},s.push(d)}return s},t.magnetic_force_between_points=function(t,n={}){let s=JSON.parse(JSON.stringify(t));const r=i(s);let h=[];return r.map((t=>{const i=t[0],n=t[1],r=e(s[i],s[n]);h[i]||(h[i]={x:0,y:0}),h[i].x+=r[0].dx,h[i].y+=r[0].dy,h[n]||(h[n]={x:0,y:0}),h[n].x+=r[1].dx,h[n].y+=r[1].dy})),s.map(((t,e)=>{h[e]&&(t.x+=h[e].x/r.length,t.y+=h[e].y/r.length)})),s},t.magnetic_force_between_two_points=e,t.merge_class_names=function(...t){return t.filter(Boolean).join(" ")},t.rgb_to_hex=function(t){return"#"+((1<<24)+(t.r<<16)+(t.g<<8)+t.b).toString(16).slice(1)},t.unique_pairs_from_array_as_indexes=i,Object.defineProperty(t,"__esModule",{value:!0})}));
